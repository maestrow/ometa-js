# План

Step4
- поддержка левой рекурсии
- переписать грамматику Ometa с использованием левой рекурсии
- Новый функционал Ometa реализуется на Ometa - bootstrapping

Step5
- Поддержка состояния без отката назад

Step6
- Привязка выражений к переменным
- Вызов правил с аргументами

Step7
- Сопоставление по шаблону на массивы
- Сопоставление по шаблону при выдове правил на агрументы правила

Step8
- Поддержка состояния с откатом

## Привязка выражений к переменным

    bind = expr ':' (ident | identArray)
    identArray = "[" ident ("," ident)* ']'

Реализовать с помощью внутреннего правила bind. 

Во внутреннем правиле rule (внутри функции парсера rule): 
- в начале: создаем новую чистую область переменных: `this.scopes.push({})`. 
- по завершению очищаем область переменных: `this.scopes.pop()`

Текущая область видимости переменных доступна по `this.scope` (что равно `this.scopes[this.scopes.length-1]`) из любого парсера (parseFn).

Во внутреннем правиле bind записываем в текущий `this.scope` значение переменной. 

Использование `this.scope`:
- В предикатах `?predicate`
- В выражении исполнения кода `&method`
- В семантических действиях `expr -> action`